<!DOCTYPE html>
{% assign data = site.data.projects[page.project] %}
<html>
  <head>
    {% include head_common.html %}
  </head>
  <body>
    {% include header.html %}
    {% include nav.html %}
    <main>
    <div class="container">
    {{content}}
    </div>
    {% for subproject in data.subprojects %}
    <div class="subproject">
        <h1 class="name">{{subproject.name}}</h1>
        <p>{{subproject.description}}</p>
        {% if subproject.features.size > 0 %}
            <h2 class="mainTopic">Features</h2>
            <div class="container marketing">
            {% assign colspanValue = 4 %}
            {% for feature in subproject.features %}
                {% assign modvalue = forloop.index0 | modulo:3 %}
                {% if modvalue == 0 %}
                <div class="row">
                    {% if forloop.rindex < 3 %}
                        {% assign colspanValue = 12 | divided_by:forloop.rindex %}
                    {% endif %}
                {% endif %}
                <div class="col-sm-{{ colspanValue }}">
                <img class="img-circle project-icon iconFeature" {% if feature.icon %}src="{{site.prefix_cdn}}{{feature.icon}}"{% endif %}></img>
                <h3>{{feature.name}}</h3>
                <p>{{feature.description}}</p>
                </div>
                {% if modvalue == 2 or forloop.last %}
                </div>
                {% endif %}
            {% endfor %}
            </div>
        {% endif %}
        
        {% if subproject.features_testing.size > 0 %}
            <h2 class="mainTopic">Testing features</h2>
            <div class="container marketing">
            {% assign colspanValue = 4 %}
            {% for feature in subproject.features_testing %}
                {% assign modvalue = forloop.index0 | modulo:3 %}
                {% if modvalue == 0 %}
                <div class="row">
                    {% if forloop.rindex < 3 %}
                        {% assign colspanValue = 12 | divided_by:forloop.rindex %}
                    {% endif %}
                {% endif %}
                <div class="col-sm-{{ colspanValue }}">
                <img class="img-circle project-icon iconFeatureTesting" {% if feature.icon %}src="{{site.prefix_cdn}}{{feature.icon}}"{% endif %}></img>
                <h3>{{feature.name}}</h3>
                <p>{{feature.description}}</p>
                </div>
                {% if modvalue == 2 or forloop.last %}
                </div>
                {% endif %}
            {% endfor %}
            </div>
        {% endif %}

        {% if subproject.features_planned.size > 0 %}
            <h2 class="mainTopic">Planned features</h2>
            <div class="container marketing">
            {% assign colspanValue = 4 %}
            {% for feature in subproject.features_planned %}
                {% assign modvalue = forloop.index0 | modulo:3 %}
                {% if modvalue == 0 %}
                <div class="row">
                    {% if forloop.rindex < 3 %}
                        {% assign colspanValue = 12 | divided_by:forloop.rindex %}
                    {% endif %}
                {% endif %}
                <div class="col-sm-{{ colspanValue }}">
                <img class="img-circle project-icon iconFeaturePlanned" {% if feature.icon %}src="{{site.prefix_cdn}}{{feature.icon}}"{% endif %}></img>
                <h3>{{feature.name}}</h3>
                <p>{{feature.description}}</p>
                </div>
                {% if modvalue == 2 or forloop.last %}
                </div>
                {% endif %}
            {% endfor %}
            </div>
        {% endif %}
        
        {% if subproject.screenshots.size > 0 %}
            <h2 class="mainTopic">Screenshots</h2>
            <div id="{{subproject.id}}_carousel" class="carousel slide" data-ride="carousel">
            <!-- Indicators -->
            <ol class="carousel-indicators">
                {% for screenshot in subproject.screenshots %}
                <li data-target="#{{subproject.id}}_carousel" data-slide-to="{{ forloop.index0 }}"{% if forloop.first %} class="active"{% endif %}></li>
                {% endfor %}
            </ol>

            <!-- Wrapper for slides -->
            <div class="carousel-inner" role="listbox">
                {% for screenshot in subproject.screenshots %}
                <div class="item{% if forloop.first %} active{% endif %}">
                <img src="{{site.prefix_cdn}}{{page.url}}{{screenshot.image_file}}" alt="">
                <div class="carousel-caption">
                    <p>{{screenshot.caption}}</p>
                </div>
                </div>
                {% endfor %}
            </div>

            <!-- Left and right controls -->
            <a class="left carousel-control" href="#{{subproject.id}}_carousel" role="button" data-slide="prev">
                <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="right carousel-control" href="#{{subproject.id}}_carousel" role="button" data-slide="next">
                <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
            </div>
        {% endif %}
        
    </div>
    {% endfor %}
    </main>
    {% include footer.html %}
  </body>
</html>
